<!DOCTYPE html>
<html lang="en">
<head>
    <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    <title>Routing</title>
</head>
<body>
    
</body>
<script>
    var apps = {"tslv" : {"ios" : "https://itunes.apple.com/ca/app/town-square/id404929057?mt=8", "play" : "https://play.google.com/store/apps/details?id=com.mobilefringe.townsquarelv", "website" : "http://www.mytownsquarelasvegas.com"}};
    
    var app_link = "";
    var appname = getUrlParameter("appname");
    var routing = getUrlParameter("routing");
    var fromStoreID = getUrlParameter("fromStoreID");
    var toStoreID = getUrlParameter("toStoreID");
    var directoryBoardXCoordinate = getUrlParameter("directoryBoardXCoordinate");
    var directoryBoardYCoordinate = getUrlParameter("directoryBoardYCoordinate");
    
    var device = navigator.userAgent;
    if(device.match(/(iPod|iPhone|iPad)/)){
        link = apps[appname].ios
    }
    else if(device.match(/(Android)/)){
        link = apps[appname].play
    }
    else {
        link = apps[appname].website
    }
    app_link = appname + "://applaunch?mode=routing=" + routing + "&fromStoreID=" + fromStoreID + "&toStoreID=" + toStoreID + "&directoryBoardXCoordinate=" + directoryBoardXCoordinate + "&directoryBoardYCoordinate=" + directoryBoardYCoordinate;
    alert(app_link)
    // setTimeout(function(){
    //     window.location = link; 
    // },1000);


var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};
</script>
</html>